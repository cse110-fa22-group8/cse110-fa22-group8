<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: create_account/createAccount.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: create_account/createAccount.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>let submit = document.getElementById('create')
submit.addEventListener("click", store);

/**
 * This function will validate the username and password the user has entered, 
 * and add to localStorage if it does not already exist,
 * else, it will alert that an identical account exists.
 */
function store(){

    let name = document.querySelector('[name="username"]');
    let pw = document.querySelector('[name="password"]');
    let pw_r = document.querySelector('[name="repeat_password"]');
    let lowerCaseLetters = /[a-z]/g;
    let upperCaseLetters = /[A-Z]/g;
    let numbers = /[0-9]/g;
    // Validate name and password requirements
    if(name.value.length == 0){
        alert('Please fill in email');

    }else if(pw.value.length == 0){
        alert('Please fill in password');

    }else if(name.value.length == 0 &amp;&amp; pw.value.length == 0){
        alert('Please fill in email and password');

    }else if(!pw.value.match(numbers)){
        alert('Please add 1 number');

    }else if(!pw.value.match(upperCaseLetters)){
        alert('please add 1 uppercase letter');

    }else if(!pw.value.match(lowerCaseLetters)){
        alert('please add 1 lowercase letter');

    } else if(pw.value != pw_r.value){
        alert("Passwords don't match");

    }
    // If valid, check if already exists in DB
    else {
        let users = localStorage.getItem('users') ? new Map(JSON.parse(localStorage.getItem('users'))) : new Map()
        if(users.has(name.value)){
            alert("An account under this username already exists")
        } else {
            users.set(name.value, pw.value);
            localStorage.setItem('users', JSON.stringify(Array.from(users)))
            alert('Your account has been created');
            window.location.replace("../login_page/login_page.html")
        }
    }

}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addRow">addRow</a></li><li><a href="global.html#check">check</a></li><li><a href="global.html#closeChart">closeChart</a></li><li><a href="global.html#closeForm">closeForm</a></li><li><a href="global.html#closeUpdate">closeUpdate</a></li><li><a href="global.html#editRow">editRow</a></li><li><a href="global.html#logoutAction">logoutAction</a></li><li><a href="global.html#openChart">openChart</a></li><li><a href="global.html#openForm">openForm</a></li><li><a href="global.html#openUpdate">openUpdate</a></li><li><a href="global.html#searchfilter">searchfilter</a></li><li><a href="global.html#store">store</a></li><li><a href="global.html#validateInput">validateInput</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Dec 09 2022 22:05:43 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
